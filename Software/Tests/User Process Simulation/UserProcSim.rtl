NOTE: DESPITE THEIR APPEARANCE, RTL FILES CANNOT BE ASSEMBLED
JMP
>Init
0
0
0
0
LDI RG0
>SYS_RETURN_VAL
LDI RG1
>TEST_VAL1
LDI RG2
>TEST_VAL2
SYS
LDI RG3
>TEST_VAL1
LDI RG4
>TEST_VAL2
CMP RG1 RG3
JNE
>UP.Error
CMP RG2 RG4
JNE
>UP.Error
CMP RG0 OUT
JNE
>UP.Error
MOV RG0 EXA
JMP
>UP.WhileTrue
JMP
>OOB_ADDRESS
NUL RG0
NUL RG1
NUL RG2
NUL RG3
NUL RG4
NUL RG5
SYS
>UP.Jump0
>UP.Jump1
>UP.Jump2
>UP.Jump3
LDI RG0
>UserProc.Jumps
LDI RG3
>UPJEnd
LOD RG1 RG0
0
LOD RG2 RG1
0
ALI SUB RG2 >PREAMBLE_SIZE
STR RG2 RG1
0
INC RG0
CMP RG0 RG3
JNE
>I.FixLoop
LDI RG0
>UserProc
LDI RG1
>UserProc.End
ALU SUB RG1 RG0
ZRO RG0
LOD RG2 RG0
>UserProc
STR RG2 RG0
>LO_ADDR
INC RG0
CMP RG0 RG1
JNE
>I.MoveLoop
LDI EXA
>ExHandler
LDI FLG
>INIT_FLG
ZRO EPC
LDI HLB
>HLB_VAL
RSM
STR RG0 RG0
>State.RG0
STR RG1 RG1
>State.RG1
STR FLG FLG
>State.FLG
MOV RG0 FLG
LDI RG1
>EXC_MASK
ALU AND RG0 RG1
ALI SRB RG0 >EXC_SHIFT
CMI RG0 >EXC_CTDZ
JEQ
>EH.CTDZEx
CMI RG0 >EXC_SYS
JEQ
>EH.SYSEx
CMI RG0 >EXC_PRIV
JEQ
>EH.PRIVEx
CMI RG0 >EXC_OOB
JEQ
>EH.OOBEx
ZRO RG0
LOD RG0 RG0
>TestStep
LDI RG1
>UNKNOWN_EXC_CODE
ALU OR RG0 RG1
STR RG0 RG0
>EH.UnknownEXCStop
HLT
0
ZRO RG0
LOD RG0 RG0
>TestStep
LDI RG1
0
CMI RG0 0
JNE
>EH.Error
LDI OUT
>SYS_RETURN_VAL
JMP
>EH.ReturnProc
ZRO RG0
LOD RG0 RG0
>TestStep
LDI RG1
1
CMI RG0 1
JNE
>EH.Error
ZRO RG0
LOD RG0 RG0
>State.FLG
ALI SET RG0 >PREV_EXMSK_BIT
STR RG0 RG0
>State.FLG
LDI CTD
>CTD_VAL
JMP
>EH.ReturnProc
ZRO RG0
LOD RG0 RG0
>TestStep
LDI RG1
2
CMI RG0 2
JNE
>EH.Error
ALI UST FLG >PREV_EXMSK_BIT
LDI EPC
>UP.PostCTD
ALI SUB EPC >PREAMBLE_SIZE
JMP
>EH.ReturnProc
ZRO RG0
LOD RG0 RG0
>TestStep
LDI RG1
3
CMI RG0 3
JNE
>EH.Error
JMP
>End
ALI SLB RG1 4
ALU OR RG0 RG1
LDI RG1
>BAD_EXC_CODE
ALU OR RG0 RG1
STR RG0 RG0
>EH.BadEXCStop
HLT
0
ZRO RG0
LOD RG0 RG0
>TestStep
INC RG0
STR RG0 RG0
>TestStep
ZRO RG0
LOD FLG RG0
>State.FLG
LOD RG1 RG0
>State.RG1
LOD RG0 RG0
>State.RG0
RSM
HLT
0x0001
